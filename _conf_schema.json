{
  "api_key": {
    "type": "string",
    "default": "",
    "title": "SiliconFlow API Key",
    "description": "用于角色/背景生成的 API Key。"
  },
  "api_channel": {
    "type": "string",
    "default": "siliconflow",
    "title": "API 渠道",
    "description": "选择 API 服务提供商。",
    "options": ["siliconflow", "modelscope"]
  },
  "modelscope_api_key": {
    "type": "string",
    "default": "",
    "title": "ModelScope API Key",
    "description": "使用 modelscope 渠道时必填。"
  },
  "character_model": {
    "type": "string",
    "default": "Qwen/Qwen-Image-Edit-2509",
    "title": "角色生成模型",
    "description": "用于换装/角色生成的模型。",
    "options": [
      "Qwen/Qwen-Image-Edit-2509",
      "Qwen/Qwen-Image-Edit",
      "Qwen/Qwen-Image"
    ]
  },
  "enable_ai_background": {
    "type": "bool",
    "default": false,
    "title": "启用 AI 背景",
    "description": "允许生成 AI 场景背景。"
  },
  "auto_background": {
    "type": "bool",
    "default": false,
    "title": "自动刷新背景",
    "description": "每次消息自动生成或复用带标签的背景。"
  },
  "background_cache_limit": {
    "type": "int",
    "default": 10,
    "title": "背景缓存上限",
    "description": "最多保留的 AI 背景数量。",
    "minimum": 1,
    "maximum": 50
  },
  "background_model": {
    "type": "string",
    "default": "black-forest-labs/FLUX.1-schnell",
    "title": "背景模型",
    "description": "AI 背景生成模型。",
    "options": [
      "black-forest-labs/FLUX.1-schnell",
      "black-forest-labs/FLUX.1-dev",
      "Kwai-Kolors/Kolors"
    ]
  },
  "output_image_size": {
    "type": "string",
    "default": "1024x1024",
    "title": "输出图片尺寸 (仅非Qwen-Edit模型)",
    "description": "⚠️ 仅对 Kolors/Qwen-Image 等模型生效。Qwen-Edit 模型的输出尺寸由输入图片决定，无法自定义。",
    "options": ["1024x1024", "1024x1536", "1536x1024", "768x1024", "1024x768"]
  },
  "num_inference_steps": {
    "type": "int",
    "default": 20,
    "title": "推理步数 (Inference Steps)",
    "description": "生成图片的迭代次数，越高质量越好但速度越慢。官网默认20。",
    "minimum": 10,
    "maximum": 50
  },
  "cfg_scale": {
    "type": "float",
    "default": 4.0,
    "title": "CFG Scale (提示词引导强度)",
    "description": "控制生成结果与提示词的贴合程度。官网默认4.0，范围1-20。",
    "minimum": 1.0,
    "maximum": 20.0
  },
  "use_ai_segmentation": {
    "type": "bool",
    "default": true,
    "title": "AI 智能抠图",
    "description": "使用 rembg (U2-Net) 进行高精度人物分割。关闭则使用传统颜色算法。首次使用需下载约50MB模型。"
  },
  "negative_prompt": {
    "type": "string",
    "default": "",
    "title": "负面提示词 (Negative Prompt)",
    "description": "自定义负面提示词。留空使用默认值。"
  },
  "fallback_image": {
    "type": "string",
    "default": "",
    "title": "失败替代图片",
    "description": "生成失败时发送的替代图片路径。留空使用 data/plugins/astrbot_plugin_magic_wardrobe/fallback.png"
  },
  "prompt_extra": {
    "type": "string",
    "default": "",
    "title": "提示词追加",
    "description": "追加到生成提示词末尾。"
  },
  "negative_prompt_extra": {
    "type": "string",
    "default": "",
    "title": "负面提示词追加",
    "description": "追加到负面提示词末尾。"
  },
  "enable_render": {
    "type": "bool",
    "default": true,
    "title": "启用对话框合成",
    "description": "将回复合成到对话框图片中。"
  },
  "intercept_all_to_image": {
    "type": "bool",
    "default": false,
    "title": "全部转图片",
    "description": "所有回复都生成图片。"
  },
  "only_change_on_request": {
    "type": "bool",
    "default": true,
    "title": "仅在请求时换装",
    "description": "非换装请求不更新角色图。"
  },
  "prefer_llm_action": {
    "type": "bool",
    "default": true,
    "title": "优先模型动作",
    "description": "让模型补全动作/表情。"
  },
  "enable_tool": {
    "type": "bool",
    "default": true,
    "title": "启用换装工具",
    "description": "启用 change_outfit 工具。"
  },
  "guard_outfit_chatter": {
    "type": "bool",
    "default": true,
    "title": "禁止无请求换装描述",
    "description": "非换装请求不提换装/换背景。"
  },
  "use_last_character_reference": {
    "type": "bool",
    "default": true,
    "title": "使用上次角色参考",
    "description": "用上次生成图锁定身份。"
  },
  "use_last_character_reference": {
    "type": "bool",
    "default": true,
    "title": "使用上次角色参考",
    "description": "用上次生成图锁定身份。"
  },
  "use_whitelist": {
    "type": "bool",
    "default": false,
    "title": "启用过滤器",
    "description": "按名单控制插件生效范围（支持 SID 和 QQ 号）。"
  },
  "whitelist_mode": {
    "type": "bool",
    "default": true,
    "title": "白名单模式",
    "description": "true=仅名单内生效，false=名单外生效（黑名单）。"
  },
  "session_list": {
    "type": "list",
    "items": { "type": "string" },
    "default": [],
    "title": "会话 SID 列表",
    "description": "填入 SID 列表（如 default_12345678）。"
  },
  "qq_number_list": {
    "type": "list",
    "items": { "type": "string" },
    "default": [],
    "title": "QQ 号列表",
    "description": "填入 QQ 号列表（如 123456789）。支持用户 QQ 和群号。"
  },
  "active_template": {
    "type": "string",
    "default": "default",
    "title": "当前布局模板",
    "description": "presets 中的布局模板。"
  },
  "webui_port": {
    "type": "int",
    "default": 18765,
    "title": "WebUI 端口",
    "description": "布局编辑器端口。"
  },
  "render_threshold": {
    "type": "int",
    "default": 0,
    "title": "合成阈值",
    "description": "文本长度小于该值不合成。"
  },
  "random_background": {
    "type": "bool",
    "default": false,
    "title": "随机背景",
    "description": "随机选择背景资源。"
  },
  "enable_tts": {
    "type": "bool",
    "default": false,
    "title": "启用语音",
    "description": "启用 TTS 语音。"
  },
  "tts_api_key": {
    "type": "string",
    "default": "",
    "title": "TTS API Key",
    "description": "SiliconFlow TTS API Key。"
  },
  "tts_voice": {
    "type": "string",
    "default": "",
    "title": "TTS 音色",
    "description": "音色 ID（如 speech:xxx）。"
  },
  "tts_speed": {
    "type": "float",
    "default": 1.0,
    "title": "语速",
    "description": "语速倍率。",
    "minimum": 0.5,
    "maximum": 2.0
  },
  "tts_gain": {
    "type": "float",
    "default": 0,
    "title": "音量增益",
    "description": "单位 dB，降低可减少电流噪声。",
    "minimum": -10,
    "maximum": 10
  },
  "tts_sample_rate": {
    "type": "int",
    "default": 44100,
    "title": "采样率",
    "description": "推荐 44100 或 48000。",
    "minimum": 16000,
    "maximum": 48000
  },
  "tts_format": {
    "type": "string",
    "default": "wav",
    "title": "音频格式",
    "description": "TTS 音频格式。",
    "options": ["wav", "mp3", "opus", "pcm"]
  },
  "tts_plain_mode": {
    "type": "string",
    "default": "text_with_voice",
    "title": "文本语音显示",
    "description": "非图片回复时是否保留文本。",
    "options": ["text_with_voice", "voice_only"]
  },
  "tts_image_mode": {
    "type": "string",
    "default": "image_with_voice",
    "title": "图片语音模式",
    "description": "图片是否附带语音。",
    "options": ["image_with_voice", "image_only"]
  },
  "tts_other_probability": {
    "type": "float",
    "default": 0.0,
    "title": "普通文本语音概率",
    "description": "纯文本回复触发语音的概率。",
    "minimum": 0.0,
    "maximum": 1.0
  },
  "tts_text_min_length": {
    "type": "int",
    "default": 5,
    "title": "语音最小长度",
    "description": "低于此长度不发语音。"
  },
  "tts_text_max_length": {
    "type": "int",
    "default": 0,
    "title": "语音最大长度",
    "description": "0 表示不限制。"
  }
}
